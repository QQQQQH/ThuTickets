```js
serverIp = 'http://140.143.129.182:80'
```

---

## app.js
### 登录
``` js
wx.request({
    url: this.globalData.serverIp + '/user/login',
    method: 'POST',
    header: {
        'content-type': 'application/x-www-form-urlencoded'
    },
    data: {
        code: res.code, //临时登录凭证
        rawData: this.globalData.rawData, //用户非敏感信息
        signature: this.globalData.signature, //签名
        encrypteData: this.globalData.encryptedData, //用户敏感信息
        iv: this.globalData.iv //解密算法的向量
    },
})
```

---

## me.js
### 身份验证
```js
wx.request({
    url: app.globalData.serverIp + '/user/verifcation'
    method: 'POST',
    header: {
        'content-type': 'application/x-www-form-urlencoded'
    },
    data: {
        skey: wx.getStorageSync('skey'),
        token: app.globalData.token //助教小程序返回的身份验证token
    }
```

---

## event/list/list.js
## 获取活动列表
``` js
wx.request({
    url: app.globalData.serverIp + '/user/events/list?expired=2' // 0表示过期活动，1表示未过期活动，其他值表示所有活动
    headers: {
        'Content-Type': 'application/json'
    }
})
```

---

## event/detail/detail.js
### 获取指定eventId的活动信息
``` js
wx.request({
    url: app.globalData.serverIp + '/user/events/detail?eventid=' + eventId
})
```

### 点击抢票
``` js
wx.request({
      url: app.globalData.serverIp + '/user/buy-ticket?skey=' +
        wx.getStorageSync('skey') + '&eventid=' + this.data.eventInfo.eventid,
    method: 'GET',
    header: {
    'content-type': 'application/x-www-form-urlencoded'
    }
})
```

---

## ticket/list/list.js
### 获取用户已购门票
``` js
wx.request({
    url: app.globalData.serverIp + '/user/tickets/list?skey=' +
        wx.getStorageSync('skey') + '&validation=1', // 0表示显示过期票，1表示显示有效票，其他值表示所有票
    method: 'GET',
    header: {
    'content-type': 'application/x-www-form-urlencoded'
    },
})
```

---

### 获取门票信息
``` js
wx.request({
    url: app.globalData.serverIp + '/user/tickets/detail?ticketid=' + ticketid,
    method: 'GET',
    header: {
    'content-type': 'application/x-www-form-urlencoded'
    }
})
```

---

### 退票
``` js
wx.request({
    url: app.globalData.serverIp + '/user/tickets/delete?skey=' + wx.getStorageSync('skey') + '&ticketid=' + ticketid,
    method: 'GET',
    header: {
    'content-type': 'application/x-www-form-urlencoded'
    }
})
```
